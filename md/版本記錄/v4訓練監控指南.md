# ğŸ® v4 è¨“ç·´ç›£æ§æŒ‡å—

> **è¨“ç·´ç‰ˆæœ¬**ï¼šv4ï¼ˆæ–¹æ¡ˆ A - å¹³è¡¡æ­£è² çå‹µï¼‰  
> **å•Ÿå‹•æ™‚é–“**ï¼š2025-10-30  
> **é è¨ˆå®Œæˆ**ï¼šå•Ÿå‹•å¾Œ 3.5 å°æ™‚  
> **è¨“ç·´ç‹€æ…‹**ï¼šğŸŸ¢ é‹è¡Œä¸­

---

## ğŸ“Š è¨“ç·´é…ç½®æ‘˜è¦

```yaml
ä»»å‹™: Isaac-Navigation-LocalPlanner-Min-v0
ç®—æ³•: PPO (RSL-RL)
ç’°å¢ƒæ•¸: 24 (ä¸¦è¡Œ)
æœ€å¤§è¿­ä»£: 10000
è¨­å‚™: cuda:0
è¨˜éŒ„å·¥å…·: WandB (nova-carter-navigation)

v4 æ ¸å¿ƒèª¿æ•´:
  - standstill: 4.0 â†’ 1.0 (â†“75%)
  - anti_idle: 2.0 â†’ 0.5 (â†“75%)
  - spin_penalty: 0.5 â†’ 0.1 (â†“80%)
  - time_penalty: 0.01 â†’ 0.005 (â†“50%)
  - progress: 60.0 (ä¿æŒ)
  - near_goal: 20.0 (ä¿æŒ)
```

---

## ğŸ” å³æ™‚ç›£æ§æ–¹å¼

### æ–¹æ³• 1ï¸âƒ£ï¼šWandB é›²ç«¯ç›£æ§ï¼ˆæœ€æ¨è–¦ï¼‰

**è¨ªå•é€£çµ**ï¼šhttps://wandb.ai/

**ç™»å…¥è³‡è¨Š**ï¼š
- ä½¿ç”¨æ‚¨çš„ WandB å¸³è™Ÿç™»å…¥
- å°ˆæ¡ˆåç¨±ï¼š`nova-carter-navigation`
- Run åç¨±ï¼š`v3_progress60_neargol20_time001`ï¼ˆæœƒè‡ªå‹•æ›´æ–°ç‚ºæ–° runï¼‰

**é—œéµæ›²ç·š**ï¼š
```
ğŸ“ˆ æ ¸å¿ƒæŒ‡æ¨™ï¼ˆå¿…çœ‹ï¼‰ï¼š
  - Episode_Reward/progress_to_goal   â† å¿…é ˆå¾è² å€¼å›æ­£ï¼
  - Episode_Reward/standstill_penalty â† æ‡‰è©²é™åˆ° -0.1 ~ -0.3
  - Episode_Reward/anti_idle          â† æ‡‰è©²é™åˆ° -0.1 ~ -0.2
  - Metrics/goal_command/position_error â† æ‡‰è©² < 3.0m
  - Episode_Termination/goal_reached  â† æ‡‰è©² > 0%
  - Mean reward                       â† æ‡‰è©² > -10

ğŸ“Š è¼”åŠ©æŒ‡æ¨™ï¼š
  - Episode_Reward/near_goal_shaping  â† æ‡‰è©² > 0.1
  - Episode_Reward/heading_alignment
  - Episode_Reward/time_penalty
  - Episode_Termination/time_out
```

---

### æ–¹æ³• 2ï¸âƒ£ï¼šçµ‚ç«¯æ©Ÿå³æ™‚æ—¥èªŒ

```bash
# å³æ™‚æŸ¥çœ‹è¨“ç·´è¼¸å‡ºï¼ˆæ¨è–¦ï¼‰
cd /home/aa/IsaacLab
tail -f training_v4.log

# æŸ¥çœ‹æœ€æ–° 50 è¡Œ
tail -50 training_v4.log

# æœå°‹é—œéµè³‡è¨Š
grep "Learning iteration" training_v4.log | tail -5
grep "Mean reward" training_v4.log | tail -5
grep "progress_to_goal" training_v4.log | tail -5
```

**çµ‚ç«¯æ©Ÿè¼¸å‡ºç¤ºä¾‹**ï¼š
```
Learning iteration 1000/10000
Mean reward: -15.32
Episode_Reward/progress_to_goal: 0.0523      â† é—œéµï¼æ‡‰è©²ç‚ºæ­£
Episode_Reward/standstill_penalty: -0.2134   â† é—œéµï¼æ‡‰è©²é™ä½
Metrics/goal_command/position_error: 2.87    â† é—œéµï¼æ‡‰è©² < 3m
```

---

### æ–¹æ³• 3ï¸âƒ£ï¼šè¨“ç·´é€²åº¦æª¢æŸ¥

```bash
# æª¢æŸ¥è¨“ç·´é€²ç¨‹
ps aux | grep train.py | grep -v grep

# æª¢æŸ¥ GPU ä½¿ç”¨ç‡
nvidia-smi

# æª¢æŸ¥ç•¶å‰è¿­ä»£é€²åº¦
grep -o "Learning iteration [0-9]*/10000" training_v4.log | tail -1

# æª¢æŸ¥ç•¶å‰çå‹µå€¼
grep "Mean reward:" training_v4.log | tail -1

# æª¢æŸ¥æœ€æ–°æª¢æŸ¥é»
ls -lth logs/rsl_rl/local_planner_carter/*/model_*.pt | head -5
```

---

### æ–¹æ³• 4ï¸âƒ£ï¼šæœ¬åœ° TensorBoardï¼ˆå‚™ç”¨ï¼‰

```bash
# å•Ÿå‹• TensorBoardï¼ˆå¦é–‹çµ‚ç«¯ï¼‰
cd /home/aa/IsaacLab
tensorboard --logdir logs/rsl_rl/local_planner_carter

# ç€è¦½å™¨è¨ªå•
# http://localhost:6006
```

---

## â±ï¸ æª¢æŸ¥é»æ™‚é–“è¡¨

### ğŸ¯ é—œéµæª¢æŸ¥æ™‚é–“é»

| æ™‚é–“ | è¿­ä»£æ•¸ | æª¢æŸ¥é …ç›® | æˆåŠŸæ¨™æº– |
|------|--------|----------|----------|
| **T+30min** | ~1000 | Progress æ˜¯å¦å›æ­£ | > 0 â­â­â­ |
| **T+30min** | ~1000 | Standstill æ˜¯å¦é™ä½ | > -0.5 |
| **T+1.5h** | ~3000 | Progress æŒçºŒç‚ºæ­£ | > 0.05 |
| **T+1.5h** | ~3000 | Position Error æ”¹å–„ | < 3.5m |
| **T+2.5h** | ~5000 | Success Rate å‡ºç¾ | > 0% |
| **T+3.5h** | ~10000 | å®Œæ•´è©•ä¼° | è¦‹ä¸‹æ–¹ |

---

## ğŸ“‹ 1000 iter å¿«é€Ÿæª¢æŸ¥ï¼ˆT+30minï¼‰

**æœ€é—œéµçš„æ—©æœŸæŒ‡æ¨™**ï¼š

```bash
# åŸ·è¡Œå¿«é€Ÿæª¢æŸ¥
cd /home/aa/IsaacLab
grep "Learning iteration 1000/10000" training_v4.log -A 20
```

**åˆ¤æ–·é‚è¼¯**ï¼š

âœ… **v4 æˆåŠŸ**ï¼ˆç¹¼çºŒè¨“ç·´ï¼‰ï¼š
```
progress_to_goal: > 0        â† å¿…é ˆå›æ­£ï¼
standstill: > -0.5           â† æ‡²ç½°é™ä½
position_error: < 4.0m
```

âš ï¸ **v4 éƒ¨åˆ†æˆåŠŸ**ï¼ˆè§€å¯Ÿè‡³ 3000 iterï¼‰ï¼š
```
progress_to_goal: -0.01 ~ 0  â† æ¥è¿‘é›¶ä½†æœªå›æ­£
standstill: -0.5 ~ -1.0      â† æœ‰æ”¹å–„ä½†ä¸å¤ 
```

âŒ **v4 å¤±æ•—**ï¼ˆåœæ­¢è¨“ç·´ï¼Œå•Ÿå‹• v5ï¼‰ï¼š
```
progress_to_goal: < -0.05    â† ä»ç„¶å¤§å¹…è² å€¼
standstill: < -1.0           â† æ‡²ç½°ä»ç„¶éé‡
```

---

## ğŸ“ˆ å®Œæ•´è©•ä¼°æ¨™æº–ï¼ˆ10000 iterï¼‰

### âœ… v4 æˆåŠŸæ¨™æº–

**æ ¸å¿ƒæŒ‡æ¨™**ï¼ˆå¿…é ˆåŒæ™‚æ»¿è¶³ï¼‰ï¼š
1. âœ… **Progress > 0.05**ï¼ˆå¾ v3 çš„ -0.01 å›æ­£ï¼‰
2. âœ… **Standstill + Anti-idle < -0.5**ï¼ˆv3 æ˜¯ -1.7ï¼‰
3. âœ… **Position Error < 3.0m**ï¼ˆå¾ 3.84m æ”¹å–„ï¼‰

**æ¬¡è¦æŒ‡æ¨™**ï¼ˆé”æˆ 2/3ï¼‰ï¼š
4. â­ **Success Rate > 0%**ï¼ˆé¦–æ¬¡æˆåŠŸï¼‰
5. â­ **Near Goal > 0.1**ï¼ˆé–‹å§‹ç”Ÿæ•ˆï¼‰
6. â­ **Mean Reward > -10**ï¼ˆå¾ -26 æ”¹å–„ï¼‰

---

### ğŸ“Š v4 çµæœåˆ†é¡

**ğŸ‰ å®Œå…¨æˆåŠŸ**ï¼š
- æ ¸å¿ƒæŒ‡æ¨™å…¨éƒ¨é”æˆ
- æ¬¡è¦æŒ‡æ¨™è‡³å°‘ 2/3
- **ä¸‹ä¸€æ­¥**ï¼šv5ï¼ˆTD3 æ¥µç°¡çå‹µï¼‰æˆ–èª²ç¨‹å­¸ç¿’

**âš ï¸ éƒ¨åˆ†æˆåŠŸ**ï¼š
- æ ¸å¿ƒæŒ‡æ¨™ 2/3 é”æˆ
- Progress å›æ­£ä½†ä¸å¤ å¤§ï¼ˆ0.01-0.04ï¼‰
- **ä¸‹ä¸€æ­¥**ï¼šå¾®èª¿æ¬Šé‡æˆ–å˜—è©¦ v5

**âŒ å¤±æ•—**ï¼š
- Progress ä»ç‚ºè² å€¼
- æ‡²ç½°ä»ç„¶éé‡
- **ä¸‹ä¸€æ­¥**ï¼šç«‹å³å•Ÿå‹• v5ï¼ˆTD3 æ¥µç°¡çå‹µï¼‰

---

## ğŸš¨ ç•°å¸¸è™•ç†

### è¨“ç·´ä¸­æ–·

```bash
# æª¢æŸ¥é€²ç¨‹æ˜¯å¦å­˜åœ¨
ps aux | grep train.py

# å¦‚æœä¸­æ–·ï¼ŒæŸ¥çœ‹æœ€å¾Œæ—¥èªŒ
tail -100 training_v4.log

# å¾æª¢æŸ¥é»æ¢å¾©ï¼ˆå¦‚æœæœ‰ï¼‰
./isaaclab.sh -p scripts/reinforcement_learning/rsl_rl/train.py \
    --task Isaac-Navigation-LocalPlanner-Min-v0 \
    --num_envs 24 \
    --resume \
    --load_run CHECKPOINT_PATH
```

### è¨“ç·´éæ…¢

```bash
# æª¢æŸ¥ GPU ä½¿ç”¨ç‡
nvidia-smi

# å¦‚æœ GPU ä½¿ç”¨ç‡ä½ (<50%)ï¼Œå¯èƒ½æ˜¯æ•¸æ“šå‚³è¼¸ç“¶é ¸
# æª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–é€²ç¨‹å ç”¨ GPU
```

### WandB æœªè¨˜éŒ„

```bash
# æª¢æŸ¥ WandB æ˜¯å¦åˆå§‹åŒ–
grep "wandb" training_v4.log | head -5

# ç¢ºèª API Key
echo $WANDB_API_KEY

# æ‰‹å‹•é‡æ–°ç™»å…¥ï¼ˆå¦‚æœéœ€è¦ï¼‰
wandb login 015e82155dc7cecb79368e0415eaf09362c260ef
```

---

## ğŸ“ è¨“ç·´æ—¥èªŒç¯„ä¾‹

### æ­£å¸¸è¨“ç·´è¼¸å‡º

```
[INFO]: Launching Isaac Sim Simulator first
[INFO]: Base environment: Environment device : cuda:0
[INFO]: Time taken for scene creation : 0.758 seconds

Learning iteration 0/10000
  Mean reward: -25.34
  Episode_Reward/progress_to_goal: 0.0124      â† å›æ­£äº†ï¼âœ…
  Episode_Reward/standstill_penalty: -0.2341   â† é™ä½äº†ï¼âœ…
  Episode_Reward/anti_idle: -0.1523
  Episode_Reward/near_goal_shaping: 0.0532
  Episode_Reward/time_penalty: -0.0100
  Metrics/goal_command/position_error: 3.65    â† æ”¹å–„ä¸­ï¼âœ…
  Episode_Termination/time_out: 0.9583
  Episode_Termination/goal_reached: 0.0417     â† å‡ºç¾æˆåŠŸï¼âœ…

Learning iteration 100/10000
  Mean reward: -18.27                          â† æŒçºŒæ”¹å–„ï¼âœ…
  ...
```

---

## ğŸ¯ v4 vs v3 å°æ¯”è¡¨

| æŒ‡æ¨™ | v3ï¼ˆå¤±æ•—ï¼‰ | v4 ç›®æ¨™ | å¯¦éš›ï¼ˆæ›´æ–°ä¸­ï¼‰ |
|------|-----------|---------|--------------|
| Progress | -0.0104 | > 0.05 | ? |
| Standstill | -1.16 | -0.1~-0.3 | ? |
| Anti-idle | -0.53 | -0.1~-0.2 | ? |
| Position Error | 3.84m | < 3.0m | ? |
| Success Rate | 0% | > 0% | ? |
| Mean Reward | -26.49 | > -10 | ? |

**æ›´æ–°æ–¹å¼**ï¼š
```bash
# æå–æœ€æ–°çµæœï¼ˆ10000 iter å®Œæˆå¾Œï¼‰
grep "Learning iteration 9999/10000" training_v4.log -A 20
```

---

## ğŸ“ å¿«é€ŸæŒ‡ä»¤åƒè€ƒ

```bash
# 1. æŸ¥çœ‹è¨“ç·´ç‹€æ…‹
tail -f /home/aa/IsaacLab/training_v4.log

# 2. æª¢æŸ¥ç•¶å‰é€²åº¦
grep "Learning iteration" /home/aa/IsaacLab/training_v4.log | tail -1

# 3. æŸ¥çœ‹æœ€æ–°çå‹µ
grep "Mean reward" /home/aa/IsaacLab/training_v4.log | tail -1

# 4. æŸ¥çœ‹ Progressï¼ˆé—œéµï¼ï¼‰
grep "progress_to_goal" /home/aa/IsaacLab/training_v4.log | tail -5

# 5. æŸ¥çœ‹ Standstillï¼ˆé—œéµï¼ï¼‰
grep "standstill" /home/aa/IsaacLab/training_v4.log | tail -5

# 6. æŸ¥çœ‹ Position Errorï¼ˆé—œéµï¼ï¼‰
grep "position_error" /home/aa/IsaacLab/training_v4.log | tail -5

# 7. æŸ¥çœ‹ Success Rate
grep "goal_reached" /home/aa/IsaacLab/training_v4.log | tail -5

# 8. åœæ­¢è¨“ç·´ï¼ˆå¦‚æœéœ€è¦ï¼‰
pkill -f "train.py"
```

---

## ğŸ¬ ä¸‹ä¸€æ­¥è¡Œå‹•ï¼ˆ10000 iter å®Œæˆå¾Œï¼‰

### âœ… å¦‚æœ v4 æˆåŠŸ
1. æ›´æ–° `md/AIäº¤æ¥æ‰‹å†Š.md` çš„å¯¦é©—æ—¥èªŒ
2. å‰µå»º `md/v4è¨“ç·´çµæœå ±å‘Š.md`
3. æ±ºå®šï¼š
   - é¸é … Aï¼šv5ï¼ˆTD3 æ¥µç°¡çå‹µï¼‰
   - é¸é … Bï¼šèª²ç¨‹å­¸ç¿’ï¼ˆç›®æ¨™è·é›¢é€æ¼¸å¢åŠ ï¼‰
   - é¸é … Cï¼šç’°å¢ƒéš¨æ©ŸåŒ–ï¼ˆå‹•æ…‹éšœç¤™ç‰©ï¼‰

### âš ï¸ å¦‚æœ v4 éƒ¨åˆ†æˆåŠŸ
1. åˆ†æå“ªäº›æŒ‡æ¨™é”æ¨™ã€å“ªäº›æœªé”æ¨™
2. å¾®èª¿æ¬Šé‡ï¼ˆä¾‹å¦‚ï¼šå†é™ä½ standstillï¼‰
3. é‡æ–°è¨“ç·´ v4.1

### âŒ å¦‚æœ v4 å¤±æ•—
1. **ç«‹å³å•Ÿå‹• v5ï¼ˆTD3 æ¥µç°¡çå‹µï¼‰**
2. å¯¦ä½œ `obstacle_proximity_penalty` å‡½æ•¸
3. ç°¡åŒ–çå‹µå¾ 8 é … â†’ 4 é …
4. åƒè€ƒ `md/DRLå°ˆæ¡ˆæ¶æ§‹åˆ†æ.md`

---

**v4 è¨“ç·´æ­£åœ¨å¾Œå°é‹è¡Œï¼é è¨ˆ 3.5 å°æ™‚å®Œæˆã€‚** ğŸš€

**ç›£æ§é€£çµ**ï¼šhttps://wandb.ai/

ç¥è¨“ç·´é †åˆ©ï¼ ğŸ‰

